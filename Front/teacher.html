<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>ELMANASA</title>
    <link rel="stylesheet" href="CSS/style.css">
    <link rel="stylesheet" href="CSS/teacher.css">
    <link rel="icon" href="assets/img/book (1).png" type="image/x-icon">

    <link href="assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <script src="assets/js/jquery-3.7.1.min.js"></script>

</head>

<!-- BODY -->

<body>
    <!-- Public View -->
    <div class="main-content">
        <header id="header">
            <div class="container d-flex align-items-center">

                <h1 class="logo me-auto col-lg-1 d-flex flex-column pt-4"><a>ELMANASA</a>
                </h1>
                <nav id="navbar" class="navbar">
                    <ul>
                        <li><a class="nav-link scrollto active" href="#material">Material</a></li>
                        <li><a class="nav-link scrollto active" href="#quiz">Quizzes</a></li>
                        <li><a class="nav-link scrollto active" href="#active_student">Active Students</a></li>
                        <!--                         <li><a class="nav-link scrollto active" href="#contact">Contact</a></li>
                    -->


                    </ul>
                    <i class="bi bi-list mobile-nav-toggle"></i>
                </nav>

            </div>
        </header>


        <div id="start" class="d-flex align-items-center">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 d-flex flex-column justify-content-center pt-4 pt-lg-0 order-2 order-lg-1"
                        data-aos-delay="200" data-aos="fade-right">
                        <h2 class="welcome-tag">Welcome To Your Online Courses Platform</h2>
                        <p>Explore a variety of featuers that will boast your teaching level and spread your knowledge
                            to huge spot of people.</p>
                    </div>
                    <div class="col-lg-6 order-1 order-lg-2  start-img" data-aos="fade-up" data-aos-delay="200">
                        <img src="assets/img/index-image.png" class="img-fluid animated" alt="">
                    </div>

                </div>
            </div>
        </div>



        <!-- ***********************************  Add Material *******************************************-->
        <div class="container" id="levels">
            <div class="container mt-5" id="material">
                <h2 class="text-center mb-4" data-aos-delay="200" data-aos="fade-down">Add Materials</h2>

                <!-- Material Form -->
                <div class="card p-4 shadow-sm" data-aos="fade-up" data-aos-delay="400">
                    <form id="materialForm">
                        <h4>Add Materials</h4>
                        <!-- Lesson Name -->
                        <div class="mb-3">
                            <label for="lessonName" class="form-label fw-bold">Lesson Name</label>
                            <input type="text" class="form-control" id="lessonName" placeholder="Enter lesson name"
                                required>
                        </div>

                        <!-- Material Input Fields -->
                        <div class="mb-3">
                            <label for="materialTitle" class="form-label fw-bold">Material Title</label>
                            <input type="text" class="form-control" id="materialTitle"
                                placeholder="Enter material title" required>
                        </div>

                        <div class="mb-3">
                            <label for="materialType" class="form-label fw-bold">Material Type</label>
                            <select id="materialType" class="form-select" required>
                                <option value="" disabled selected>Select material type</option>
                                <option value="video">Video</option>
                                <option value="pdf">PDF</option>
                                <option value="link">Link</option>
                            </select>
                        </div>

                        <!-- Dynamic Input for File or Link -->
                        <div class="mb-3" id="dynamicInput">
                            <input type="file" id="materialFile" class="form-control d-none" accept=".pdf,.mp4">
                            <input type="text" id="materialLink" class="form-control d-none"
                                placeholder="Enter the link">
                        </div>

                        <button type="button" class="btn btn-add-material mb-3" id="add" onclick="addMaterial()"
                            style="font-size: 14px;">
                            <i class="bi bi-plus-circle"></i> Add Material
                        </button>

                        <!-- Material List -->
                        <h4>Uploaded Materials</h4>
                        <div id="materialsList"></div>

                        <!-- Publish Button -->
                        <div class="text-end mt-3">
                            <button type="button" class="btn" onclick="publishMaterials()" id="add">Publish
                                Materials</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Success Notification -->
            <div id="successAlert" class="alert alert-success position-fixed top-0 end-0 m-3 d-none" role="alert">
                Materials published successfully!
            </div>
        </div>
        <!-- ***********************************  Add Material *******************************************-->


        <!-- ***********************************  Add Quiz *******************************************-->

        <div class="container quiz" id="active_student">
            <div class="container mt-5 add-quiz" id="quiz">
                <h2 class="text-center mb-4" data-aos-delay="200" data-aos="fade-down">Quiz Management</h2>
                <!-- Add New Quiz Button -->
                <div data-aos-delay="200" data-aos="fade-up">
                    <div class="text-center mb-3">
                        <button class="btn" data-bs-toggle="modal" data-bs-target="#addQuizModal">
                            <i class="bi bi-plus-circle"></i> Add New Quiz
                        </button>
                    </div>

                    <!-- Quiz Modal -->
                    <div class="modal fade" id="addQuizModal" tabindex="-1" aria-labelledby="addQuizModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h3 class="modal-title" id="addQuizModalLabel">Add New Quiz</h3>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                                        style="background-color:rgba(255, 255, 255, 0.047);"></button>
                                </div>
                                <div class="modal-body">
                                    <form id="quizForm">
                                        <!-- Lesson and Duration -->
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="lessonInput" class="form-label">Lesson</label>
                                                <input type="text" class="form-control" id="lessonInput"
                                                    placeholder="Enter lesson name" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="durationInput" class="form-label">Duration (in
                                                    minutes)</label>
                                                <input type="number" class="form-control" id="durationInput"
                                                    placeholder="Enter duration" required>
                                            </div>
                                        </div>

                                        <!-- Questions Section -->
                                        <h5>Questions</h5>
                                        <div id="questionsContainer">
                                            <!-- Default Question Block -->
                                            <div class="question-block mb-4">
                                                <label class="form-label">Question</label>
                                                <input type="text" class="form-control mb-2 question-input"
                                                    placeholder="Enter question" required>

                                                <div class="row">
                                                    <div class="col-md-6 mb-2">
                                                        <input type="text" class="form-control choice-input"
                                                            placeholder="Choice A" required>
                                                    </div>
                                                    <div class="col-md-6 mb-2">
                                                        <input type="text" class="form-control choice-input"
                                                            placeholder="Choice B" required>
                                                    </div>
                                                    <div class="col-md-6 mb-2">
                                                        <input type="text" class="form-control choice-input"
                                                            placeholder="Choice C" required>
                                                    </div>
                                                    <div class="col-md-6 mb-2">
                                                        <input type="text" class="form-control choice-input"
                                                            placeholder="Choice D" required>
                                                    </div>
                                                </div>

                                                <label class="form-label">Correct Answer</label>
                                                <select class="form-select correct-answer-input" required>
                                                    <option value="" disabled selected>Select the correct answer
                                                    </option>
                                                    <option value="A">A</option>
                                                    <option value="B">B</option>
                                                    <option value="C">C</option>
                                                    <option value="D">D</option>
                                                </select>
                                                <hr>
                                            </div>
                                        </div>

                                        <!-- Add New Question Button -->
                                        <button type="button" class="btn btn-info btn-sm mb-3 add_new"
                                            onclick="addNewQuestion()">
                                            <i class="bi bi-plus-circle"></i> Add Another Question
                                        </button>

                                        <!-- Submit Button -->
                                        <div class="text-end">
                                            <button type="submit" class="btn btn-success">Save Quiz</button>
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Placeholder to Display Quiz Data -->
                    <div id="quizList" class="mt-4">
                        <h3>Quizzes</h3>
                        <ul class="list-group" id="quizDisplay"></ul>
                    </div>

                    <div class="toast-container">
                        <div id="quizToast"
                            class="toast align-items-center text-bg-success border-0 position-fixed top-0 end-0 m-3"
                            role="alert" aria-live="assertive" aria-atomic="true">
                            <div class="d-flex">
                                <div class="toast-body">
                                    Quiz has been successfully published!
                                </div>
                                <button type="button" class="btn-close btn-close-white me-2 m-auto"
                                    data-bs-dismiss="toast" aria-label="Close"></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>

        <!-- ***********************************  Add Quiz *******************************************-->

        <!--  Active students   -->
        <div class="container align-items-center" id="active_student">
            <h2 data-aos-delay="200" data-aos="fade-up">Active Students</h2>
            <div class="search-bar" data-aos="fade-down" data-aos-delay=" 100">
                <input type="text" id="searchInput" placeholder="Search here...">
                <i class="bi bi-search"></i>
            </div>

            <div class="row g-3" data-aos-delay="200" data-aos="fade-down">
                <!-- Student 1 -->
                <div class="col-md-12">
                    <div class="student-card d-flex align-items-center p-3">
                        <!-- Student Image -->
                        <div class="student-image me-3">
                            <img src="assets/img/Marwa.jpg" alt="Student 1">
                        </div>
                        <!-- Student Details -->
                        <div class="student-details flex-grow-1">
                            <div class="student-name" contenteditable="false">Marwa Abdelmonem</div>
                            <div class="student-email text-muted mb-1" contenteditable="false">
                                m2rwaaeldeeb721@gmail.com
                            </div>
                            <div class="student-info text-muted" contenteditable="false">grade: 90% </div>
                            <div class="student-info2 text-muted" contenteditable="false">Rank : 1000 </div>
                            <div class="status-text mt-1" id="status-1"></div>
                        </div>
                        <!-- Action Buttons -->
                        <div class="actions d-flex align-items-center gap-2">
                            <a class=" edit" onclick="editDetails(this)">
                                <i class="bi bi-pencil-fill"></i>
                            </a>
                            <button class="btn btn-danger btn-sm"
                                onclick="deleteStudent(this, 'status-1')">Delete</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row g-3" data-aos-delay="200" data-aos="fade-down">
                <!-- Student 2 -->
                <div class="col-md-12">
                    <div class="student-card d-flex align-items-center p-3">
                        <!-- Student Image -->
                        <div class="student-image me-3">
                            <img src="assets/img/Malak.jpg" alt="Student 2">
                        </div>
                        <!-- Student Details -->
                        <div class="student-details flex-grow-1">
                            <div class="student-name" contenteditable="false">Malak Alsayed</div>
                            <div class="student-email text-muted mb-1" contenteditable="false">
                                malakalsayed@gmail.com
                            </div>
                            <div class="student-info text-muted" contenteditable="false">grade: 92% </div>
                            <div class="student-info2 text-muted" contenteditable="false">Rank : 1050 </div>
                            <div class="status-text mt-1" id="status-1"></div>
                            <div class="status-text mt-1" id="status-2"></div>
                        </div>
                        <!-- Action Buttons -->
                        <div class="actions d-flex align-items-center gap-2">
                            <a class=" edit" onclick="editDetails(this)">
                                <i class="bi bi-pencil-fill"></i>
                            </a>
                            <button class="btn btn-danger btn-sm"
                                onclick="deleteStudent(this, 'status-2')">Delete</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row g-3" data-aos-delay="200" data-aos="fade-down">
                <!-- Student 2 -->
                <div class="col-md-12">
                    <div class="student-card d-flex align-items-center p-3">
                        <!-- Student Image -->
                        <div class="student-image me-3">
                            <img src="assets/img/Ahmed.jpg" alt="Student 2">
                        </div>
                        <!-- Student Details -->
                        <div class="student-details flex-grow-1">
                            <div class="student-name" contenteditable="false">Ahmed Abdelaziz</div>
                            <div class="student-email text-muted mb-1" contenteditable="false">fhmy8308@gmail.com
                            </div>
                            <div class="student-info text-muted" contenteditable="false">grade: 94% </div>
                            <div class="student-info2 text-muted" contenteditable="false">Rank : 1100 </div>
                            <div class="status-text mt-1" id="status-1"></div>
                            <div class="status-text mt-1" id="status-2"></div>
                        </div>
                        <!-- Action Buttons -->
                        <div class="actions d-flex align-items-center gap-2">
                            <a class=" edit" onclick="editDetails(this)">
                                <i class="bi bi-pencil-fill"></i>
                            </a>
                            <button class="btn btn-danger btn-sm"
                                onclick="deleteStudent(this, 'status-2')">Delete</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row g-3" data-aos-delay="200" data-aos="fade-down">
                <!-- Student 2 -->
                <div class="col-md-12">
                    <div class="student-card d-flex align-items-center p-3">
                        <!-- Student Image -->
                        <div class="student-image me-3">
                            <img src="assets/img/Mohsen.jpg" alt="Student 2">
                        </div>
                        <!-- Student Details -->
                        <div class="student-details flex-grow-1">
                            <div class="student-name" student-name="Mohamed Mohsen" contenteditable="false">Mohamed
                                Mohsen</div>
                            <div class="student-email text-muted mb-1" contenteditable="false">
                                mohamedmohsen1970@gmail.com
                            </div>
                            <div class="student-info text-muted" contenteditable="false">grade: 94% </div>
                            <div class="student-info2 text-muted" contenteditable="false">Rank : 1150 </div>
                            <div class="status-text mt-1" id="status-1"></div>
                            <div class="status-text mt-1" id="status-2"></div>
                        </div>
                        <!-- Action Buttons -->
                        <div class="actions d-flex align-items-center gap-2">
                            <a class=" edit" onclick="editDetails(this)">
                                <i class="bi bi-pencil-fill"></i>
                            </a>
                            <button class="btn btn-danger btn-sm"
                                onclick="deleteStudent(this, 'status-2')">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>
    <script src="assets/js/script.js"></script>
    <script src="assets/js/teacher.js"></script>
    <script>
        function editDetails(button) {
            const card = button.closest('.student-card');
            const name = card.querySelector('.student-name');
            const email = card.querySelector('.student-email');
            const info = card.querySelector('.student-info');
            const info2 = card.querySelector('.student-info2');

            const editable = name.contentEditable === "true";
            name.contentEditable = !editable;
            email.contentEditable = !editable;
            info.contentEditable = !editable;
            info2.contentEditable = !editable;

            button.innerHTML = editable ? '<i class="bi bi-pencil-fill"></i>' : '<i class="bi bi-check2-all"></i>';
        }

        // Function to delete a student and show 'Deleted' status
        function deleteStudent(button, statusId) {
            const statusText = document.getElementById(statusId);
            statusText.textContent = "Deleted";
            statusText.className = "status-text deleted";

            // Add restore button after delete
            const restoreBtn = document.createElement('button');
            restoreBtn.textContent = "Restore";
            restoreBtn.textContent = "Restore";
            restoreBtn.style.backgroundColor = "#339b20";
            restoreBtn.style.color = "white";
            restoreBtn.style.border = "none";
            restoreBtn.style.padding = "5px 10px";
            restoreBtn.style.borderRadius = "5px";
            restoreBtn.style.cursor = "pointer"; restoreBtn.className = "btn btn-sm btn-restore ms-2";
            restoreBtn.onclick = function () {
                restoreStudent(statusId, restoreBtn, button);
            };

            button.parentElement.appendChild(restoreBtn);
            button.disabled = true; // Disable delete button
        }

        // Function to restore a student and show 'Restored' status
        function restoreStudent(statusId, restoreBtn, deleteBtn) {
            const statusText = document.getElementById(statusId);
            statusText.textContent = "Restored";
            statusText.className = "status-text restored";

            restoreBtn.remove(); // Remove restore button
            deleteBtn.disabled = false; // Re-enable delete button
        }

        const searchInput = document.getElementById('searchInput');
        const studentsList = document.getElementById('active_student');
        const studentItem = studentsList.getElementsByClassName('student-name');

        searchInput.addEventListener('input', function () {
            const searchText = searchInput.value.toLowerCase();

            // Loop through all courses and show/hide based on search
            Array.from(studentItem).forEach(function (studentItem) {
                const studentName = studentItem.getAttribute('student-name').toLowerCase();

                if (studentName.includes(searchText)) {
                    studentItem.style.display = '';
                } else {
                    studentItem.style.display = 'none';
                }
            });
        });




        function addNewQuestion() {
            const questionsContainer = document.getElementById('questionsContainer');
            const questionHTML = `
    <div class="question-block mb-4">
        <label class="form-label">Question</label>
        <input type="text" class="form-control mb-2 question-input" placeholder="Enter question" required>

        <div class="row">
            <div class="col-md-6 mb-2">
                <input type="text" class="form-control choice-input" placeholder="Choice A" required>
            </div>
            <div class="col-md-6 mb-2">
                <input type="text" class="form-control choice-input" placeholder="Choice B" required>
            </div>
            <div class="col-md-6 mb-2">
                <input type="text" class="form-control choice-input" placeholder="Choice C" required>
            </div>
            <div class="col-md-6 mb-2">
                <input type="text" class="form-control choice-input" placeholder="Choice D" required>
            </div>
        </div>

        <label class="form-label">Correct Answer</label>
        <select class="form-select correct-answer-input" required>
            <option value="" disabled selected>Select the correct answer</option>
            <option value="A">A</option>
            <option value="B">B</option>
            <option value="C">C</option>
            <option value="D">D</option>
        </select>
        <hr>
    </div>
    `;
            questionsContainer.insertAdjacentHTML('beforeend', questionHTML);
        }

        // Handle Quiz Form Submission
        document.getElementById('quizForm').addEventListener('submit', function (e) {
            e.preventDefault();

            // Get Lesson and Duration
            const lesson = document.getElementById('lessonInput').value;
            const duration = document.getElementById('durationInput').value;

            // Collect Questions
            const questions = [];
            document.querySelectorAll('.question-block').forEach(block => {
                const question = block.querySelector('.question-input').value;
                const choices = Array.from(block.querySelectorAll('.choice-input')).map(input => input.value);
                const correctAnswer = block.querySelector('.correct-answer-input').value;

                questions.push({ question, choices, correctAnswer });
            });

            const quizToast = new bootstrap.Toast(document.getElementById('quizToast'));
            quizToast.show();


            // Display Quiz Data
            const quizDisplay = document.getElementById('quizDisplay');
            let quizHTML = `
    <li class="list-group-item">
        <strong>Lesson:</strong> ${lesson} | <strong>Duration:</strong> ${duration} minutes <br>
        <strong>Questions:</strong>
        <ul>
            `;
            questions.forEach((q, index) => {
                quizHTML += `
            <li>
                Q${index + 1}: ${q.question} <br>
                Choices: A) ${q.choices[0]}, B) ${q.choices[1]}, C) ${q.choices[2]}, D) ${q.choices[3]} <br>
                Correct Answer: ${q.correctAnswer}
            </li>
            `;
            });
            quizHTML += '</ul></li>';

            quizDisplay.insertAdjacentHTML('beforeend', quizHTML);

            // Reset Form and Close Modal
            document.getElementById('quizForm').reset();
            document.getElementById('questionsContainer').innerHTML = '';
            addNewQuestion(); // Add back one question block
            const modalElement = document.getElementById('addQuizModal');
            const modal = bootstrap.Modal.getInstance(modalElement);
            modal.hide();
        });

        // Add Initial Question Block
        addNewQuestion();
    </script>
</body>

</html>